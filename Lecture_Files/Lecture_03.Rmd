---
# title: "Lecture 03"
# author: "Kasthuri Kannan"
# date: "Sept 07, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

---

### Lecture 03 (Sept. 14, 2017)

---

#### R Basics II

In this lecture we will consider other data structures, graphics and programming elements.

---

#### Factors

Factors are determined through categorical variables. What are categorical variables?

* Limited number of differing values.
* Belong to a certain category.
* For statistical analysis, R calls them factors.

##### Creating and manipulating factors

```{r eval=TRUE}
  # Create a blood group vector
  blood_group_vector <- c("AB", "O", "B+", "AB-", "O", "AB", "A", "A", "B", "AB-")
  # Create fatcors from the vector
  blood_group_factor <- factor(blood_group_vector)
  blood_group_factor
```

**Note** 

1. The levels are sorted alphabetically. 
2. No more quotation marks.

R encodes factors to integers for easier memory access and computations. This is done alphabetically. For example, A is assigned 1, AB is assigned 2 etc. This can be viewed by invoking the `str()` function:

```{r eval=TRUE}
  # Show the structure of the blood group factor
  str(blood_group_factor)
```

This can be over-ridden by specifying the levels argument for the `factor()` function.

```{r eval=TRUE}
  # Define another set of levels over-riding default
  blood_group_factor2 <- factor(blood_group_vector, levels = c("A", "B", "B+", "AB", "AB-", "O"))
  str(blood_group_factor2)
```

Renaming factors can be done using the `level()` function.

```{r eval=TRUE}
  # Define blood type
  blood_type <- c("B", "A", "AB", "A", "O")
  # Find the factors
  blood_type_factor <- factor(blood_type)
  blood_type_factor
  # Rename the factors
  levels(blood_type_factor) <- c("BT_A", "BT_AB", "BT_B", "BT_O")
  blood_type_factor
```

**Note** It is extremely **important** to follow the same order as the default order supplied by R. Otherwise, the result can be extremely confusing as the following exercise will show.

<br>
<span style="color:magenta">**Classwork**</span>: Rename the blood_type_factor in the above example as follows: 

`levels(blood_type_factor) <- c("BT_A", "BT_B", "BT_AB", "BT_O")` 

and justify the result of outputting `blood_type_factor`.
<br>

If you want to label the levels, it is always best to define the labels along with the levels like this -

```{r eval=FALSE}
  factor(blood_type, levels=c("A","B","AB","O"), labels=c("BT_A","BT_B","BT_AB","BT_O"))
```

##### Nominal vs. Ordinal factors

_Nominal factors_: Categorical variables that cannot be ordered, like blood group. For example, it doesn't make sense to say blood group A < blood group B.

_Ordinal factors_: Those categorical variables that can be ordered. For instance, tumor sizes. We can say T1 (tumor size 2cm or smaller) < T2 (tumor size larger than 2cm but smaller than 5 cm).

R provides us with the way to impose order on factors. Simply use the argument "ordered=TRUE" inside the factor function.

```{r eval=TRUE}
  # Specify the tumor size vectore
  tumor_size <- c("T1","T1","T2","T3","T1")
  # Set the order by specifying "ordered=TRUE"
  tumor_size_factor <- factor(tumor_size, ordered=TRUE, levels=c("T1","T2","T3"))
  # Print the results
  tumor_size_factor
  # Compare one factor vs the other
  tumor_size_factor[1] < tumor_size_factor[2]
```

<br>
<span style="color:magenta">**Classwork**</span>: Use the inequality operator (< or >) on a nominal category and print the output.
<br>

---

#### Lists

Recall vectors and matrices can hold only one data type, like integer or character. Lists can hold multiple R objects, without having to perform coercion.

```{r eval=TRUE}
  # Defining different data type as vector
  # Note coercion takes place
  vec <- c("Blood-sugar","High", 140, "Units", "mg/dL")
  vec
  # And as a list
  lst <- list("Blood sugar","High", 140, "mg/dL")
  lst
  # One can use the list function to see if something is a list
  is.list(lst)
```

Naming a list can be done through the `names()` function or specifying it in the list itself.

```{r eval=TRUE}
  # Define list
  lst <- list("Blood sugar","High", 140, "mg/dL")
  # Assign names and print
  names(lst) <- c("Fluid","Category","Value","Units")
  lst
  # Specify within the list
  list(Fluid="Blood sugar",Category="High", Value=140, Units="mg/dL")
  # For compact display use the str() function
  str(lst)
```  

**Note**: List can contain another list, or any number of nested lists.

#### Selected materials and references

[An Introduction to R](https://cran.r-project.org/doc/manuals/R-intro.pdf)